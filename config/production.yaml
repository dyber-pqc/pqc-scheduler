# PQC Scheduler Production Configuration
# Version: 1.0.0
# Copyright (c) 2025 Dyber, Inc.

scheduler:
  mdp:
    gamma: 0.99
    epsilon: 0.01
    max_iterations: 100
    recompute_interval_sec: 300
    cache_policy: true

  weights:
    security: 1.0
    latency: 0.6
    cost: 0.4
    throughput: 0.5

  state_space:
    threat_bins: 3
    workload_bins:
      - 1000
      - 5000
      - 10000
      - 25000
      - 50000
      - 75000
      - 100000
      - 150000
      - 200000
      - 300000
      - 500000
    utilization_bins: 3

  action_space:
    algorithm_count: 20
    migration_directions: 3
    allocation_profiles: 10

algorithms:
  enabled:
    classical:
      - ECDSA-P256
      - ECDSA-P384
      - X25519
    post_quantum:
      - ML-KEM-512
      - ML-KEM-768
      - ML-KEM-1024
      - ML-DSA-44
      - ML-DSA-65
      - ML-DSA-87
      - SLH-DSA-128f
    hybrid:
      - X25519+ML-KEM-768
      - P256+ML-KEM-768
      - P384+ML-KEM-1024
      - Ed25519+ML-DSA-65
      - P256+ML-DSA-65

  performance:
    ML-KEM-512:
      keygen_us: 18
      encap_us: 24
      decap_us: 22
      security_bits: 128
      public_key_bytes: 800
      ciphertext_bytes: 768
    ML-KEM-768:
      keygen_us: 28
      encap_us: 36
      decap_us: 32
      security_bits: 192
      public_key_bytes: 1184
      ciphertext_bytes: 1088
    ML-KEM-1024:
      keygen_us: 42
      encap_us: 51
      decap_us: 47
      security_bits: 256
      public_key_bytes: 1568
      ciphertext_bytes: 1568
    ML-DSA-44:
      keygen_us: 98
      sign_us: 198
      verify_us: 92
      security_bits: 128
      public_key_bytes: 1312
      signature_bytes: 2420
    ML-DSA-65:
      keygen_us: 142
      sign_us: 287
      verify_us: 134
      security_bits: 192
      public_key_bytes: 1952
      signature_bytes: 3293
    ML-DSA-87:
      keygen_us: 214
      sign_us: 389
      verify_us: 187
      security_bits: 256
      public_key_bytes: 2592
      signature_bytes: 4595
    SLH-DSA-128f:
      keygen_us: 892
      sign_us: 12450
      verify_us: 678
      security_bits: 128
      public_key_bytes: 32
      signature_bytes: 17088
    ECDSA-P256:
      keygen_us: 12
      sign_us: 18
      verify_us: 22
      security_bits: 128
      public_key_bytes: 64
      signature_bytes: 64
    ECDSA-P384:
      keygen_us: 28
      sign_us: 42
      verify_us: 52
      security_bits: 192
      public_key_bytes: 96
      signature_bytes: 96
    X25519:
      keygen_us: 8
      encap_us: 12
      decap_us: 12
      security_bits: 128
      public_key_bytes: 32
      ciphertext_bytes: 32

degradation:
  fallback_chain:
    primary:
      - ML-KEM-768
      - X25519+ML-KEM-768
      - ML-KEM-512
      - X25519
    signature:
      - ML-DSA-65
      - Ed25519+ML-DSA-65
      - ML-DSA-44
      - ECDSA-P256

  warm_standby:
    enabled: true
    precompute_keys: true
    key_pool_size: 5000
    refresh_interval_sec: 1800

  thresholds:
    latency_max_us: 500
    error_rate_max: 0.0001
    utilization_high: 0.80
    utilization_critical: 0.90

migration:
  current_phase: hybrid

  phase_duration:
    assessment: 4
    hybrid_deployment: 8
    pqc_primary: 16
    classical_deprecation: 24

  rollback:
    enabled: true
    auto_trigger: true
    latency_threshold_us: 800
    error_threshold: 0.005
    cooldown_sec: 600
    max_rollbacks_per_day: 3

  dual_key:
    enabled: true
    sync_interval_sec: 60

resources:
  cores:
    classical_cores: 8
    pqc_cores: 16
    hybrid_cores: 8
    ml_cores: 4

  memory:
    key_cache_mb: 2048
    session_cache_mb: 4096
    work_buffer_mb: 1024

  queues:
    submit_queue_depth: 8192
    dispatch_queue_depth: 2048
    completion_queue_depth: 8192
    priority_queue_depth: 512

compliance:
  frameworks:
    fips_140_3: true
    pci_dss: true
    hipaa: false
    fedramp: false

  security:
    min_security_bits: 128
    require_quantum_safe: false
    allow_classical_only: false

  audit:
    enabled: true
    log_all_operations: true
    log_algorithm_selection: true
    log_policy_changes: true
    retention_days: 730

threat:
  model:
    initial_threat_level: 0.2
    threat_increase_rate: 0.03

  quantum_timeline:
    scenario: moderate
    crqc_probability_2030: 0.15
    crqc_probability_2035: 0.45
    crqc_probability_2040: 0.75

  sources:
    - name: nist
      url: https://csrc.nist.gov/projects/post-quantum-cryptography
      refresh_interval_sec: 3600
    - name: cisa
      url: https://www.cisa.gov/quantum
      refresh_interval_sec: 3600

monitoring:
  prometheus:
    enabled: true
    port: 9090
    path: /metrics

  metrics:
    collection_interval_ms: 500
    histogram_buckets:
      - 5
      - 10
      - 25
      - 50
      - 100
      - 250
      - 500
      - 1000
      - 2500
      - 5000

  alerts:
    latency_p99_us: 500
    throughput_min: 100000
    error_rate_max: 0.0001
    availability_min: 0.99999

logging:
  level: info
  format: json
  output:
    - type: stdout
    - type: file
      path: /var/log/pqc-scheduler/scheduler.log
      rotation: daily
      retention_days: 90

redis:
  url: redis://redis-cluster.internal:6379
  pool_size: 50
  timeout_ms: 500

acceleration:
  software:
    use_avx2: true
    use_avx512: true
    thread_pool_size: 0

  fpga:
    enabled: true
    device: /dev/xdma0
    max_utilization: 0.85
    dma_buffer_size_mb: 8
