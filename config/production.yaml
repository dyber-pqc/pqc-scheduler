# PQC Scheduler Production Configuration
# Version: 1.0.0
# Copyright (c) 2025 Dyber, Inc.
#
# Production-optimized configuration with high availability settings

_base: config/default.yaml

scheduler:
  mdp:
    gamma: 0.99
    epsilon: 1.0e-8                # Tighter convergence for production
    max_iterations: 5000
    recompute_interval_sec: 300    # Less frequent recomputation
    cache_policy: true
    
  weights:
    security: 1.0
    latency: 0.6                   # Slightly higher latency priority
    cost: 0.4
    throughput: 0.5

# Full algorithm set enabled
algorithms:
  enabled:
    classical:
      - ECDSA-P256
      - ECDSA-P384
      - X25519
    post_quantum:
      - ML-KEM-512
      - ML-KEM-768
      - ML-KEM-1024
      - ML-DSA-44
      - ML-DSA-65
      - ML-DSA-87
      - SLH-DSA-128f
    hybrid:
      - X25519+ML-KEM-768
      - P256+ML-KEM-768
      - P384+ML-KEM-1024
      - Ed25519+ML-DSA-65
      - P256+ML-DSA-65

degradation:
  fallback_chain:
    primary:
      - ML-KEM-768
      - X25519+ML-KEM-768
      - ML-KEM-512
      - X25519
    signature:
      - ML-DSA-65
      - Ed25519+ML-DSA-65
      - ML-DSA-44
      - ECDSA-P256
      
  warm_standby:
    enabled: true
    precompute_keys: true
    key_pool_size: 5000
    refresh_interval_sec: 1800
    
  thresholds:
    latency_max_us: 500
    error_rate_max: 0.0001         # 0.01% - stricter for production
    utilization_high: 0.80
    utilization_critical: 0.90

migration:
  current_phase: hybrid
  
  rollback:
    enabled: true
    auto_trigger: true
    latency_threshold_us: 800
    error_threshold: 0.005
    cooldown_sec: 600
    max_rollbacks_per_day: 3

resources:
  cores:
    classical_cores: 8
    pqc_cores: 16
    hybrid_cores: 8
    ml_cores: 4
    
  memory:
    key_cache_mb: 2048
    session_cache_mb: 4096
    work_buffer_mb: 1024
    
  queues:
    submit_queue_depth: 8192
    dispatch_queue_depth: 2048
    completion_queue_depth: 8192
    priority_queue_depth: 512

compliance:
  frameworks:
    fips_140_3: true
    pci_dss: true
    hipaa: false
    fedramp: false
    
  security:
    min_security_bits: 128
    require_quantum_safe: false
    allow_classical_only: false    # Require at least hybrid
    
  audit:
    enabled: true
    log_all_operations: true
    log_algorithm_selection: true
    log_policy_changes: true
    retention_days: 730            # 2 years

threat:
  model:
    initial_threat_level: 0.2
    threat_increase_rate: 0.03
    
  quantum_timeline:
    scenario: moderate

monitoring:
  prometheus:
    enabled: true
    port: 9090
    path: /metrics
    
  metrics:
    collection_interval_ms: 500
    histogram_buckets:
      - 5
      - 10
      - 25
      - 50
      - 100
      - 250
      - 500
      - 1000
      - 2500
      - 5000
      
  alerts:
    latency_p99_us: 500
    throughput_min: 100000
    error_rate_max: 0.0001
    availability_min: 0.99999      # Five nines

logging:
  level: info
  format: json
  output:
    - type: stdout
    - type: file
      path: /var/log/pqc-scheduler/scheduler.log
      rotation: daily
      retention_days: 90

redis:
  url: redis://redis-cluster.internal:6379
  pool_size: 50
  timeout_ms: 500

acceleration:
  software:
    use_avx2: true
    use_avx512: true
    thread_pool_size: 0
    
  fpga:
    enabled: true
    device: /dev/xdma0
    max_utilization: 0.85
    dma_buffer_size_mb: 8
